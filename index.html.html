<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¯å”¯ç¾å­¸ï½œè½è½èº«é«”çš„æ‚„æ‚„è©±</title>
    <!-- ä½¿ç”¨ Tailwind CSS é€²è¡Œç‰ˆé¢ä½ˆå±€ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF8;
            margin: 0;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #FFD1DC;
            border-radius: 4px;
        }

        /* æ¨¡æ“¬ 4:5 æ¯”ä¾‹èˆ‡é™°å½± */
        .app-container {
            width: 100%;
            max-width: 450px;
            aspect-ratio: 4 / 5;
            max-height: 95vh;
            background: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            border-radius: 1.5rem;
            border: 1px solid #F1F5F9;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="app" class="app-container relative">
        <!-- å…§å®¹æœƒé€é JavaScript å‹•æ…‹æ¸²æŸ“åˆ°é€™è£¡ -->
    </div>

    <script>
        // --- æ ¸å¿ƒè³‡æ–™åº« ---
        const dialoguePool = [
            { id: 1, text: "æœ€è¿‘æ˜¯ä¸æ˜¯æ˜æ˜èººåœ¨åºŠä¸Šæº–å‚™è¦ç¡äº†ï¼Œè…¦è¢‹å»é‚„åœ¨è½‰å·¥ä½œæˆ–ç”Ÿæ´»ä¸­å¤§å¤§å°å°çš„äº‹æƒ…ï¼Œæ ¹æœ¬æ²’è¾¦æ³•å¥½å¥½ä¼‘æ¯ï¼Ÿ", main: "é ­éƒ¨èˆ’çœ é‡‹å£“", add: "è€³ç‡­é ­åˆ®" },
            { id: 2, text: "è¦ºå¾—çœ¼å£“å¾ˆé«˜ï¼Œçœ‹æ±è¥¿è¦ºå¾—åƒåŠ›æ¨¡ç³Šé€£å¸¶è‘—å¤ªé™½ç©´å…©é‚Šéƒ½ä¸å¤ªèˆ’æœï¼Œå¶çˆ¾é‚„æœƒä¼´éš¨åé ­ç—›ï¼Ÿ", main: "é ­éƒ¨èˆ’çœ é‡‹å£“", add: "ç†±çŸ³æŒ‰æ‘©" },
            { id: 3, text: "é€™å¹¾å¤©è¦ºå¾—å£“åŠ›å¤§åˆ°é€£ç¡è¦ºéƒ½ä¸å®‰ç©©ï¼Œç¿»ä¾†ç¿»å»ï¼Œä¸€è¦ºé†’ä¾†è¦ºå¾—é‚„æ˜¯é ­æ˜è…¦è„¹ï¼Ÿ", main: "èƒŒéƒ¨æ¤èƒèˆ’æ´»", add: "æš–èŠ¯å¢Š" },
            { id: 4, text: "æœ€è¿‘è¦ºå¾—èƒ¸å£ç…©æ‚¶ï¼Œå¥½åƒå‘¼å¸ä¸å¤ªé †æš¢ï¼Œå¶çˆ¾é‚„æœƒè¦ºå¾—æœ‰é»å–˜ä¸éæ°£ï¼Ÿ", main: "ç¾èƒ¸å½ˆæ½¤å¾©æ´»", add: "ç¾èƒ¸å¾‹å‹•å„€" },
            { id: 5, text: "ç¶“å¸¸ä½é ­æ»‘æ‰‹æ©Ÿæˆ–çœ‹é›»è…¦ï¼Œé•·æ™‚é–“ç¶­æŒåŒæ¨£å§¿å‹¢ï¼Œè¦ºå¾—è„–å­è‚©è†€ï¼Œç”šè‡³æ•´éš»æ‰‹éƒ½è¦ºå¾—å¥½ç— ï¼Ÿæœ‰æ™‚å€™é‚„æœƒæ‰‹éº»ï¼Ÿ", main: "è‚©é ¸æ·±å±¤æ”¾é¬†", add: "ç¾é«”å„€" },
            { id: 6, text: "æœˆç¶“ä¾†å‰å¾Œï¼Œèƒ¸éƒ¨æœ‰æ™‚å€™ç¢°åˆ°æœƒæœ‰è„¹ç—›æ„Ÿï¼Ÿç”šè‡³æœ‰æ™‚å€™é‚„æœƒæ„Ÿè¦ºèƒ¸éƒ¨ç¡¬ç¡¬çš„åƒæ‘¸åˆ°ç¡¬å¡Šï¼Ÿ", main: "ç¾èƒ¸å½ˆæ½¤å¾©æ´»", add: "ç†±å°è†œ" },
            { id: 7, text: "æ˜æ˜æ²’æœ‰ç©¿éœ²è‚šçš„è¡£æœï¼Œä½†æ˜¯è…¹éƒ¨æ‘¸èµ·ä¾†å°±æ˜¯æ¶¼æ¶¼çš„ï¼Œç‰¹åˆ¥æƒ³è²¼æš–æš–åŒ…/æŠ±å€‹ç†±æ°´è¢‹æˆ–å–ç†±çš„æ±è¥¿ï¼Ÿ", main: "æš–å®®æº«é¤Šè­·ç†", add: "æš–è…¹è‡ç‡­" },
            { id: 8, text: "æ¯å€‹æœˆçš„ç¶“æœŸé‚£å¹¾å¤©å‰å¾Œéƒ½éå¾—å¾ˆç—›è‹¦ï¼Œè…°ç— èƒŒç—›åˆ°å‹•éƒ½ä¸æƒ³å‹•ï¼Œå°±ç®—æ˜¯è²¼è—¥å¸ƒä¹Ÿæ²’æ•ˆï¼Œå¾ˆæƒ³æ‰¾äººæŒ‰ä¸€ä¸‹çœ‹çœ‹èƒ½ä¸èƒ½æ¯”è¼ƒèˆ’æœä¸€é»ï¼Ÿ", main: "æš–å®®æº«é¤Šè­·ç†", add: "æš–èŠ¯å¢Š" },
            { id: 9, text: "ç…§é¡å­çš„æ™‚å€™ï¼Œè¦ºå¾—æ°£è‰²ä¸å¤ªå¥½ï¼Œçœ‹èµ·ä¾†å¾ˆç–²æ†Šï¼Œçš®è†šæš—æ²ˆï¼Œæ²’æœ‰å…‰æ¾¤æ„Ÿï¼Ÿ", main: "æš–å®®æº«é¤Šè­·ç†", add: "å¤ªç©ºè‰™" },
            { id: 10, text: "å·¥ä½œä¸€æ•´å¤©ä¸‹ä¾†ï¼Œè‚©é ¸åƒµç¡¬ï¼Œè¦ºå¾—ç— ç—›ä¸èˆ’æœï¼Ÿ", main: "è‚©é ¸æ·±å±¤æ”¾é¬†", add: "ç†±çŸ³æŒ‰æ‘©" },
            { id: 11, text: "è„–å­è¦ºå¾—å¾ˆç— ï¼Œç”šè‡³é€£è½‰é ­è·Ÿäººæ‰“æ‹›å‘¼éƒ½è¦ºå¾—æœ‰é»å¡ï¼Ÿ", main: "è‚©é ¸æ·±å±¤æ”¾é¬†", add: "æš–èŠ¯å¢Š" },
            { id: 12, text: "å¿™èµ·ä¾†çš„æ™‚å€™ï¼Œè¦ºå¾—æ•´å€‹å¾ŒèƒŒéƒ½å¥½é‡ï¼Œå®¹æ˜“é§èƒŒç«™ä¸ç›´ï¼Ÿ", main: "èƒŒéƒ¨æ¤èƒèˆ’æ´»", add: "æš–èº«è¢‹" },
            { id: 13, text: "åˆ°äº†ä¸‹åˆæˆ–å‚æ™šï¼Œè¦ºå¾—é‹å­è®Šå¥½ç·Šï¼Œæ•´å€‹è…¿è¦ºå¾—æ²‰é‡ä¸æƒ³å‹•ï¼Ÿ", main: "è…¿éƒ¨è¼•ç›ˆé‡‹å£“", add: "å»è§’è³ª" },
            { id: 14, text: "æ„Ÿè¦ºèº«é«”ä»£è¬æ¯”ä»¥å‰å·®ï¼Œå®¹æ˜“æ°´è…«ç–²ç´¯ï¼Ÿ", main: "çº–è…¿å‹»ç¨±ç·Šå¯¦", add: "å¤ªç©ºè‰™" },
            { id: 15, text: "è¦ºå¾—èº«é«”çœ‹èµ·ä¾†æ²’æœ‰ç·šæ¢æ„Ÿï¼Œè‚‰ä¹Ÿå¥½åƒé¬†é¬†å®å®çš„ï¼Œä¸å¦‚ä»¥å‰é‚£éº¼ç·Šå¯¦ï¼Ÿ", main: "è…°è…¹ç·Šè‡´æ›²ç·š", add: "ç¾é«”å„€" }
        ];

        // --- ç‹€æ…‹ç®¡ç† ---
        let gameState = 'start'; 
        let resultStep = 0;
        let questions = [];
        let currentIndex = 0;
        let selected = [];

        const appEl = document.getElementById('app');

        // --- æ¸²æŸ“å‡½æ•¸ ---
        function render() {
            let html = '';

            if (gameState === 'start') {
                html = `
                <div class="flex-1 flex flex-col items-center justify-center p-8 space-y-8 animate-fadeIn text-center">
                    <div class="space-y-2">
                        <h1 class="text-3xl font-black text-stone-700 tracking-tight">å¯å”¯ç¾å­¸</h1>
                        <div class="h-1 w-10 bg-pink-300 mx-auto rounded-full"></div>
                    </div>
                    <div class="w-32 h-32 bg-[#FFF9F6] rounded-full flex items-center justify-center border-2 border-pink-100 shadow-inner text-6xl">ğŸµ</div>
                    <div class="space-y-4 px-4">
                        <p class="text-xl leading-relaxed text-stone-700 font-medium">å“ˆå›‰ï½ æˆ‘æ˜¯å°è±ã€‚<br>åœ¨æˆ‘å€‘é–‹å§‹èŠå¤©å‰ï¼Œ<br>è«‹å…ˆé™ªæˆ‘ä¸€èµ· <span class="font-bold border-b-4 border-pink-300">æ·±å‘¼å¸</span>ã€‚</p>
                        <p class="text-base text-stone-500 leading-relaxed">éœä¸‹å¿ƒä¾†ï¼Œè½è½é€™é™£å­ï¼Œ<br>èº«é«”æœ‰å“ªäº›è²éŸ³æƒ³å‘Šè¨´å¦³ã€‚</p>
                    </div>
                    <button onclick="startChat()" class="w-full py-4 bg-pink-400 text-white rounded-2xl text-lg font-bold shadow-lg active:scale-95 transition-all">æº–å‚™å¥½ï¼Œæˆ‘å€‘å°±é–‹å§‹å›‰ï¼</button>
                </div>`;
            } else if (gameState === 'chat') {
                const q = questions[currentIndex];
                const progress = ((currentIndex + 1) / 6) * 100;
                html = `
                <div class="w-full h-1.5 bg-stone-50 absolute top-0 left-0 z-20">
                    <div class="h-full bg-pink-400 transition-all duration-300" style="width: ${progress}%"></div>
                </div>
                <div class="flex-1 flex flex-col p-6 animate-fadeIn justify-between h-full pt-10">
                    <div class="space-y-4 text-center flex-1 flex flex-col justify-center">
                        <div class="inline-block bg-stone-100 px-3 py-1 rounded-full text-xs font-bold text-stone-400">èº«é«”çš„è²éŸ³ ${currentIndex + 1} / 6</div>
                        <div class="bg-[#FFF9F6] p-6 rounded-3xl border border-pink-50 shadow-sm flex-1 flex items-center justify-center max-h-[50vh] overflow-y-auto custom-scrollbar">
                            <p class="text-lg font-bold leading-loose text-stone-600 text-left">ã€Œ${q.text}ã€</p>
                        </div>
                    </div>
                    <div class="space-y-3 pt-6 pb-2">
                        <button onclick="handleAnswer(true)" class="w-full py-4 bg-pink-400 text-white rounded-2xl text-lg font-bold shadow-md active:scale-95 transition-all">å°...æˆ‘ä¹Ÿå¸¸é€™æ¨£</button>
                        <button onclick="handleAnswer(false)" class="w-full py-4 bg-white border-2 border-stone-200 text-stone-500 rounded-2xl text-lg font-bold active:bg-stone-50 transition-all">ç›®å‰é‚„å¥½å–”</button>
                    </div>
                </div>`;
            } else if (gameState === 'result') {
                html = `
                <div class="flex-1 flex flex-col p-6 animate-fadeIn h-full">
                    <div class="text-center space-y-2 shrink-0 mb-4">
                        <h2 class="text-xl font-black text-stone-700">å°è±çš„èª²ç¨‹å»ºè­°</h2>
                        <div class="h-1 w-12 bg-pink-400 mx-auto rounded-full"></div>
                    </div>
                    <div class="flex-1 bg-[#FFF9F6] p-6 rounded-3xl border border-pink-50 shadow-inner flex flex-col justify-between overflow-hidden relative">
                        ${renderResultContent()}
                    </div>
                    <div class="pt-4 shrink-0 pb-2">
                        ${renderResultButtons()}
                        <button onclick="reset()" class="w-full text-stone-300 text-sm font-bold hover:text-stone-400 py-2 mt-1">é‡æ–°èŠèŠ â†»</button>
                    </div>
                </div>`;
            }

            // åŠ ä¸Š Footer
            const footerHtml = `
            <footer class="bg-stone-50 border-t border-stone-100 py-3 text-center shrink-0 z-10 relative">
                <p class="text-xs font-bold text-stone-500 flex items-center justify-center gap-1 mb-1 leading-none"><span>ğŸ“</span> å°ä¸­å¸‚å¤§é‡Œå€è‡³å–„è·¯ 32 è™Ÿ (2F)</p>
                <p class="text-[10px] text-stone-400 tracking-[0.3em] font-black uppercase leading-none">å¯å”¯ç¾å­¸ KEWI BEAUTY</p>
            </footer>`;

            appEl.innerHTML = html + footerHtml;
        }

        function renderResultContent() {
            if (selected.length === 0) {
                return `<div class="text-center h-full flex flex-col justify-center items-center text-stone-400 text-lg font-bold border-2 border-dashed border-stone-200 rounded-3xl bg-white/50 px-4">
                    <span class="text-4xl mb-4">âœ¨</span><p>å¦³æŠŠè‡ªå·±ç…§é¡§å¾—å¾ˆå¥½å–”ï¼<br>æƒ³æ‰¾å°è±èŠèŠå¤©ï¼Œä¹Ÿéå¸¸æ­¡è¿ã€‚</p>
                </div>`;
            }

            if (resultStep === 0) {
                return `<div class="space-y-4 animate-fadeIn h-full flex flex-col">
                    <p class="text-base text-stone-700 leading-relaxed font-bold shrink-0">è¦ªæ„›çš„æœ‹å‹ï¼Œè¬è¬å¦³é¡˜æ„æ•é–‹å¿ƒæ‰‰è·Ÿæˆ‘åˆ†äº«ï¼Œé€™æ®µæ™‚é–“æ‰¿å—äº†é€™éº¼å¤šä¸èˆ’æœï¼ŒçœŸçš„è¾›è‹¦ä½ äº†~</p>
                    <div class="bg-white p-5 rounded-2xl border-2 border-pink-200 shadow-md relative flex-1 flex flex-col justify-center">
                        <div class="absolute top-0 right-0 bg-pink-400 text-white text-xs px-4 py-1.5 font-bold rounded-bl-2xl">å„ªå…ˆæ¨è–¦</div>
                        <h3 class="text-pink-500 font-bold text-base mb-4">ğŸŒŸ å°è±å»ºè­°å„ªå…ˆå˜—è©¦ï¼š</h3>
                        <div class="space-y-4">
                            <div class="flex flex-col gap-1 text-left"><span class="font-bold text-stone-400 text-xs tracking-widest uppercase">ä¸»èª²ç¨‹ï¼š</span><span class="text-xl font-black text-stone-800 border-b-4 border-pink-100 inline-block">${selected[0].main}</span></div>
                            <div class="flex flex-col gap-1 text-left"><span class="font-bold text-stone-400 text-xs tracking-widest uppercase">æ­é…åŠ å€¼é …ç›®ï¼š</span><span class="text-xl font-black text-emerald-600 border-b-4 border-emerald-50 inline-block">${selected[0].add}</span></div>
                        </div>
                    </div>
                </div>`;
            } else if (resultStep === 1) {
                const others = [...new Set(selected.slice(1).map(s => s.main))];
                return `<div class="space-y-4 animate-fadeIn h-full flex flex-col justify-center">
                    ${others.length > 0 ? `<div class="space-y-3 shrink-0"><h3 class="text-stone-500 font-bold text-sm text-center">å¦³ä¹Ÿå¯èƒ½æœ‰æ„Ÿçš„å…¶ä»–éœ€æ±‚ï¼š</h3><div class="flex flex-wrap justify-center gap-2">
                        ${others.map(m => `<span class="bg-white px-3 py-1.5 rounded-xl border border-stone-200 text-xs text-stone-500 font-bold shadow-sm">${m}</span>`).join('')}
                    </div></div>` : ''}
                    <div class="pt-4 border-t border-stone-200 text-left">
                        <p class="text-sm text-[#4B5563] leading-relaxed font-bold bg-white/50 p-4 rounded-xl">
                            <span class="font-bold text-stone-800 text-base block mb-1 underline">ã€è²¼å¿ƒæé†’ã€‘</span>
                            å°è±çš„å»ºè­°æ˜¯åŸºæ–¼èº«å¿ƒæ”¾é¬†çš„ç¶“é©—åˆ†äº«ï¼Œ<span class="font-bold text-stone-800 underline underline-offset-4 decoration-pink-300">åƒ…ä¾›èª²ç¨‹é¸æ“‡åƒè€ƒ</span>ã€‚
                            è‹¥èº«é«”æœ‰æ˜é¡¯ä¸é©ã€åŠ‡çƒˆç–¼ç—›æˆ–æ‘¸åˆ°ä¸æ˜ç¡¬å¡Šç­‰ç—…å¾µï¼Œ
                            <span class="text-stone-900 font-black border-b-4 border-stone-400">è«‹å‹™å¿…å…ˆå°‹æ±‚å°ˆæ¥­é†«å¸«çš„è¨ºæ–·èˆ‡å”åŠ©å–”ï¼</span>
                        </p>
                    </div>
                </div>`;
            } else {
                return `<div class="flex-1 flex flex-col items-center justify-center text-center space-y-6 animate-fadeIn">
                    <div class="w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center text-5xl">ğŸ’Œ</div>
                    <h3 class="text-xl font-black text-stone-700 italic">æº–å‚™å¥½é ç´„å¦³çš„å°ˆå±¬æ™‚å…‰äº†å—ï¼Ÿ</h3>
                    <p class="text-stone-500 font-bold px-4">é»æ“Šä¸‹æ–¹æŒ‰éˆ•å°‡å»ºè­°å‚³çµ¦å°è±ï¼Œ<br>è®“æˆ‘ç‚ºå¦³å®‰æ’æœ€åˆé©çš„å‘µè­·é«”é©—ã€‚</p>
                </div>`;
            }
        }

        function renderResultButtons() {
            if (selected.length === 0) {
                return `<a href="https://line.me/R/ti/p/@kewibeauty" target="_blank" class="w-full py-4 bg-[#06C755] text-white rounded-2xl font-black text-lg shadow-xl flex items-center justify-center gap-3 no-underline">æ‰¾å°è±èŠèŠå¤©</a>`;
            }

            if (resultStep < 2) {
                return `<button onclick="nextStep()" class="w-full py-4 bg-stone-800 text-white rounded-2xl text-lg font-bold shadow-md active:scale-95 transition-all flex items-center justify-center gap-2">ä¸‹ä¸€æ­¥ï¼šäº†è§£æ›´å¤šè³‡è¨Š â–¶</button>`;
            }

            const mainCourse = selected[0].main;
            const addCourse = selected[0].add;
            const message = `å“ˆå›‰å°è±ï½æˆ‘å‰›åšå®Œèº«é«”æ‚„æ‚„è©±æª¢æ¸¬ï¼Œæƒ³äº†è§£å»ºè­°çš„èª²ç¨‹ï¼šã€${mainCourse}ã€‘æ­é…ã€${addCourse}ã€‘ï¼Œæƒ³è©¢å•è¿‘æœŸå¯ä»¥é ç´„çš„æ™‚é–“ï¼Œè¬è¬ï¼`;
            const lineUrl = `https://line.me/R/oaMessage/@kewibeauty/?${encodeURIComponent(message)}`;

            return `<a href="${lineUrl}" target="_blank" class="w-full py-4 bg-[#06C755] text-white rounded-2xl font-black text-lg shadow-xl flex items-center justify-center gap-3 no-underline animate-bounce">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 10.3c0-5.7-5.4-10.3-12-10.3s-12 4.6-12 10.3c0 5.1 4.3 9.3 10.1 10.1.4 0 .9.3 1.1.7l.4 1.7c.1.5.5.6.8.4l2.1-1.4c1.8-1.2 3.6-2.5 5.1-4.2 2.8-3.1 4.4-4.8 4.4-7.3z"/></svg>
                <span>æŠŠå»ºè­°å‚³çµ¦å°è±ï¼Œé ç´„è«®è©¢</span>
            </a>`;
        }

        // --- é‚è¼¯æ§åˆ¶ ---
        function startChat() {
            questions = [...dialoguePool].sort(() => 0.5 - Math.random()).slice(0, 6);
            currentIndex = 0;
            selected = [];
            gameState = 'chat';
            render();
        }

        function handleAnswer(felt) {
            if (felt) selected.push(questions[currentIndex]);
            if (currentIndex < 5) {
                currentIndex++;
            } else {
                gameState = 'result';
                resultStep = 0;
            }
            render();
        }

        function nextStep() {
            resultStep++;
            render();
        }

        function reset() {
            gameState = 'start';
            render();
        }

        // åˆå§‹æ¸²æŸ“
        render();

    </script>
</body>
</html>