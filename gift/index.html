<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¯å”¯ç¾å­¸ï½œè–èª•ä½³ç¯€é€æº«æš–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8F3F0;
            margin: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .app-container {
            width: 100%;
            max-width: 420px;
            aspect-ratio: 4 / 5;
            background: white;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            border-radius: 2rem;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 6px solid #fff;
        }

        .watercolor-bg {
            position: absolute;
            inset: 0;
            pointer-events: none;
            opacity: 0.7;
            background: 
                radial-gradient(circle at top right, #FFE4E6 0%, transparent 60%),
                radial-gradient(circle at bottom left, #DCFCE7 0%, transparent 60%);
        }

        /* éœ‡å‹•ç‰¹æ•ˆ */
        @keyframes item-shake {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.05); }
            75% { transform: rotate(5deg) scale(1.05); }
        }

        .item-shaking {
            animation: item-shake 0.15s ease-in-out infinite;
        }

        /* å…©ç¨®çˆ†é–‹ç‰¹æ•ˆ */
        .burst-overlay {
            position: absolute;
            pointer-events: none;
            display: none;
            z-index: 50;
            border-radius: 50%;
        }

        /* è£é£¾çƒçˆ†è£‚ï¼šå½©è‰²é–ƒçˆ */
        @keyframes ball-burst {
            0% { transform: scale(0.1); opacity: 1; box-shadow: 0 0 0 0 #FFD1DC, 0 0 0 0 #BEE3F8; }
            50% { opacity: 0.8; box-shadow: 0 0 30px 20px #FFD1DC, 0 0 50px 30px #BEE3F8; }
            100% { transform: scale(2.5); opacity: 0; }
        }

        /* ç¦®ç‰©ç›’çˆ†è£‚ï¼šé‡‘å…‰å™´ç™¼ */
        @keyframes gift-burst {
            0% { transform: scale(0.1) rotate(0); opacity: 1; filter: brightness(1); }
            50% { transform: scale(1.8) rotate(180deg); opacity: 1; filter: brightness(2); }
            100% { transform: scale(4); opacity: 0; filter: brightness(1); }
        }

        .burst-ball { animation: ball-burst 0.5s ease-out forwards; display: block; background: white; }
        .burst-gift { animation: gift-burst 0.6s cubic-bezier(0.17, 0.89, 0.32, 1.49) forwards; display: block; background: radial-gradient(circle, #FFF9C4 0%, #FFD54F 100%); }

        .prize-card {
            animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .snowflake {
            position: absolute;
            top: -10px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: snow-fall linear infinite;
        }

        @keyframes snow-fall {
            to { transform: translateY(600px); }
        }
    </style>
</head>
<body>

    <div id="app" class="app-container">
        <div class="watercolor-bg"></div>
        <div id="snow-field" class="absolute inset-0 pointer-events-none"></div>
        <div id="burst" class="burst-overlay"></div>

        <div id="main-content" class="relative z-10 flex-1 flex flex-col p-6 text-center overflow-hidden">
            <!-- å…§å®¹ç”± JS æ¸²æŸ“ -->
        </div>

        <footer class="relative z-20 bg-white/80 backdrop-blur-sm border-t border-stone-100 py-3 px-4 text-center shrink-0">
            <p class="text-[12px] font-bold text-stone-600 mb-0.5 flex items-center justify-center gap-1 leading-none">
                <span class="text-rose-400">ğŸ“</span> å°ä¸­å¸‚å¤§é‡Œå€è‡³å–„è·¯ 32 è™Ÿ (2F)
            </p>
            <p class="text-[9px] text-stone-400 tracking-[0.4em] font-black uppercase leading-none">å¯å”¯ç¾å­¸ KEWI BEAUTY</p>
        </footer>
    </div>

    <script>
        const prizes = [
            { id: 1, name: "é ­çï¼šå¥èƒ¸æ¿€å¯¦éœœ (ä¹™ç½)", desc: "é ‚ç´šè³¦æ´»ï¼Œæ¥µè‡´ç·Šå¯¦", bg: "bg-rose-50", color: "text-rose-600", weight: 1 },
            { id: 2, name: "äºŒçï¼šç¾èƒ¸è³¦æ´»ä¹³éœœ (ä¹™æ¢)", desc: "å½ˆæ½¤æ»‹é¤Šï¼ŒæŸ”å«©å‘µè­·", bg: "bg-pink-50", color: "text-pink-600", weight: 2 },
            { id: 3, name: "ä¸‰çï¼šæŒ‰æ‘©ç²¾æ²¹ (ä¹™ç½)", desc: "èŠ³ç™‚èˆ’å£“ï¼Œèº«å¿ƒå¹³è¡¡", bg: "bg-amber-50", color: "text-amber-600", weight: 3 },
            { id: 4, name: "5æŠ˜ é©šå–œå„ªæƒ ", desc: "è–èª•å¥‡è¹Ÿï¼ŒåŠåƒ¹å¯µæ„›", bg: "bg-purple-50", color: "text-purple-600", weight: 1 },
            { id: 9, name: "9æŠ˜ å„ªæƒ åˆ¸", desc: "å°ç¢ºå¹¸æŠ˜æ‰£ï¼Œç«‹å³ä½¿ç”¨", bg: "bg-teal-50", color: "text-teal-600", weight: 25 },
            { id: 10, name: "95æŠ˜ å„ªæƒ åˆ¸", desc: "é«”é©—æŠ˜æ‰£ï¼Œè¼•é¬†å…¥æ‰‹", bg: "bg-teal-50", color: "text-teal-600", weight: 30 },
            { id: 11, name: "ç†±æ•·çœ¼ç½© (ä¹™ç‰‡)", desc: "èˆ’ç·©çœ¼å£“ï¼Œæš–æš–å…¥ç¡", bg: "bg-orange-50", color: "text-orange-600", weight: 35 },
            { id: 12, name: "ç†±æ•·è²¼ (ä¹™ç‰‡)", desc: "æš–å®®æš–èº«ï¼Œéš¨èº«å‘µè­·", bg: "bg-orange-50", color: "text-orange-600", weight: 35 },
            { id: 13, name: "ç”œèœœç³–æœç½", desc: "é‡‘æ²™/ç³–æœï¼Œç”œåœ¨å¿ƒé ­", bg: "bg-orange-50", color: "text-orange-600", weight: 35 }
        ];

        let state = 'start';
        let wonPrize = null;

        function handlePick(e, type) {
            const burst = document.getElementById('burst');
            const rect = e.target.getBoundingClientRect();
            const appRect = document.getElementById('app').getBoundingClientRect();
            
            burst.style.left = (rect.left - appRect.left + rect.width/2 - 40) + 'px';
            burst.style.top = (rect.top - appRect.top + rect.height/2 - 40) + 'px';
            burst.style.width = '80px';
            burst.style.height = '80px';

            e.target.classList.add('item-shaking');
            
            setTimeout(() => {
                burst.className = `burst-overlay ${type === 'ball' ? 'burst-ball' : 'burst-gift'}`;
                e.target.style.opacity = '0';
                
                // æ¬Šé‡éš¨æ©Ÿ
                const total = prizes.reduce((sum, p) => sum + p.weight, 0);
                let rand = Math.random() * total;
                wonPrize = prizes.find(p => (rand -= p.weight) <= 0) || prizes[prizes.length-1];
                
                setTimeout(() => {
                    state = 'result';
                    render();
                    burst.className = 'burst-overlay';
                }, 350);
            }, 600);
        }

        function render() {
            const content = document.getElementById('main-content');
            
            if (state === 'start') {
                content.innerHTML = `
                    <div class="flex-1 flex flex-col items-center justify-center space-y-6 animate-fadeIn">
                        <div class="space-y-1">
                            <span class="text-rose-400 font-bold tracking-[0.4em] text-[10px] block uppercase">Warmest Wishes</span>
                            <h1 class="text-3xl font-black text-stone-800 tracking-tight">è–èª•ä½³ç¯€é€æº«æš–</h1>
                        </div>
                        <div class="w-24 h-24 bg-rose-50 rounded-full flex items-center justify-center border-2 border-white shadow-lg text-5xl">ğŸ„</div>
                        <div class="space-y-3 px-4 text-center">
                            <p class="text-xl font-bold text-stone-700 underline decoration-rose-200 decoration-2 underline-offset-4">å“ˆå›‰ï½æˆ‘æ˜¯å°è±ã€‚</p>
                            <p class="text-base text-stone-600 leading-relaxed font-bold">
                                æˆ‘åœ¨è–èª•æ¨¹ä¸Šæ›äº†å¥½å¤šç¦®ç‰©ï¼Œ<br>é¸ä¸€å€‹å¦³æœ€å–œæ­¡çš„é ˜å–å§ï¼
                            </p>
                        </div>
                        <button onclick="state='play';render();" class="px-10 py-3 bg-rose-400 text-white rounded-full text-lg font-black shadow-lg active:scale-95 transition-all">
                            é ­çéæˆ‘è«å±¬ï¼ âœ¨
                        </button>
                    </div>
                `;
            } else if (state === 'play') {
                content.innerHTML = `
                    <div class="flex-1 flex flex-col items-center justify-center animate-fadeIn">
                        <div class="mb-4">
                            <h2 class="text-lg font-black text-stone-700 underline decoration-rose-200 underline-offset-8">é»æ“Šè£é£¾çƒæˆ–ç¦®ç‰©ç›’</h2>
                        </div>

                        <div class="relative w-64 h-72 flex flex-col items-center justify-end pb-4">
                            <svg viewBox="0 0 200 260" class="w-full h-full drop-shadow-md overflow-visible">
                                <!-- æ¨¹å¹¹ -->
                                <rect x="88" y="215" width="24" height="40" fill="#5D4037" />
                                <!-- è–èª•æ¨¹å±¤ç´š -->
                                <path d="M100 25 L65 85 Q100 70 135 85 Z" fill="#2D5A27" />
                                <path d="M100 70 L50 155 Q100 135 150 155 Z" fill="#244D1F" />
                                <path d="M100 140 L35 225 Q100 205 165 225 Z" fill="#1B3A18" />
                                <!-- è–èª•å½©å¸¶ -->
                                <path d="M70 70 Q100 90 130 75" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6" />
                                <path d="M55 130 Q100 160 145 135" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6" />
                                <path d="M40 200 Q100 230 160 205" fill="none" stroke="#FFD700" stroke-width="2" opacity="0.6" />
                                <!-- æ¨¹é ‚å¤§æ˜Ÿæ˜Ÿ -->
                                <polygon points="100,5 105,20 120,20 108,30 113,45 100,35 87,45 92,30 80,20 95,20" fill="#FFD700" stroke="#F59E0B" stroke-width="1" />
                            </svg>

                            <div class="absolute inset-0">
                                <!-- è£é£¾çƒä½ç½®å‘å³åç§»èª¿æ•´ -->
                                <button onclick="handlePick(event, 'ball')" class="absolute top-[48px] left-[95px] text-2xl hover:scale-125 transition-transform">ğŸ”´</button>
                                <button onclick="handlePick(event, 'ball')" class="absolute top-[105px] left-[85px] text-2xl hover:scale-125 transition-transform">ğŸŸ¡</button>
                                <button onclick="handlePick(event, 'ball')" class="absolute top-[115px] left-[135px] text-2xl hover:scale-125 transition-transform">ğŸ”µ</button>
                                <button onclick="handlePick(event, 'ball')" class="absolute top-[180px] left-[70px] text-2xl hover:scale-125 transition-transform">ğŸŸ£</button>
                                <button onclick="handlePick(event, 'ball')" class="absolute top-[170px] left-[145px] text-2xl hover:scale-125 transition-transform">ğŸŸ </button>
                            </div>

                            <div class="absolute -bottom-2 flex gap-2 items-end">
                                <button onclick="handlePick(event, 'gift')" class="text-5xl hover:scale-110 transition-transform">ğŸ</button>
                                <button onclick="handlePick(event, 'gift')" class="text-6xl hover:scale-110 transition-transform">ğŸ’</button>
                                <button onclick="handlePick(event, 'gift')" class="text-5xl hover:scale-110 transition-transform">ğŸ§§</button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (state === 'result') {
                const msg = `å“ˆå›‰å°è±ï½æˆ‘å‰›å‰›åœ¨åº—è£¡æŠ½ä¸­äº†è–èª•å°ç¦®ï¼šã€${wonPrize.name}ã€‘ï¼Œæƒ³è·Ÿå¦³é ˜å–å…Œæ›ï¼Œè¬è¬ï¼`;
                content.innerHTML = `
                    <div class="prize-card flex-1 flex flex-col items-center justify-center space-y-3">
                        <h2 class="text-xl font-black text-stone-800">æ­å–œç²å¾—è–èª•é©šå–œï¼</h2>
                        <div class="${wonPrize.bg} p-5 rounded-[1.5rem] border-2 border-white shadow-lg w-full space-y-3">
                            <p class="text-base text-stone-700 font-bold leading-tight">
                                è¦ªæ„›çš„æœ‹å‹ï¼Œè¬è¬å¦³ä¾†åˆ°å¯å”¯ç¾å­¸ï¼<br>
                                é€™æ˜¯ä¸€ä»½å±¬æ–¼å¦³çš„å°å°å¿ƒæ„ï¼š
                            </p>
                            <div class="py-3 border-y border-white/40 text-center">
                                <div class="text-[9px] font-black text-stone-400 tracking-widest uppercase mb-1">å¹¸é‹ç²å¾—</div>
                                <div class="text-xl font-black ${wonPrize.color} bg-white/40 px-3 py-1 rounded-lg inline-block mb-1">${wonPrize.name}</div>
                                <div class="text-stone-500 font-bold text-sm leading-tight">ã€Œ ${wonPrize.desc} ã€</div>
                            </div>
                            <div class="bg-white/30 p-2.5 rounded-lg text-left border border-white/50">
                                <p class="text-[11px] text-stone-600 leading-normal font-bold">
                                    <span class="text-rose-500 underline decoration-1 underline-offset-2">ğŸ„ å…Œæ›é ˜å–é™åˆ¶ï¼š</span><br>
                                    æœ¬æ´»å‹•é™ã€Œç¾å ´ä¾†åº—ã€æŠ½çé ˜å–ï¼Œ<span class="text-stone-800 underline">å‡ºç¤ºæ­¤ç•«é¢å…Œæ›</span>ã€‚æˆªåœ–æˆ–è½‰å‚³ç„¡æ•ˆå–”ï¼
                                </p>
                            </div>
                        </div>
                        <div class="w-full space-y-2 flex flex-col items-center">
                            <a href="https://line.me/R/oaMessage/@kewibeauty/?${encodeURIComponent(msg)}" target="_blank" class="w-10/12 py-3 bg-[#06C755] text-white rounded-xl font-black text-lg shadow-lg flex items-center justify-center gap-2 no-underline animate-bounce">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 10.3c0-5.7-5.4-10.3-12-10.3s-12 4.6-12 10.3c0 5.1 4.3 9.3 10.1 10.1.4 0 .9.3 1.1.7l.4 1.7c.1.5.5.6.8.4l2.1-1.4c1.8-1.2 3.6-2.5 5.1-4.2 2.8-3.1 4.4-4.8 4.4-7.3z"/></svg>
                                <span>å‡ºç¤ºç•«é¢ä¸¦é»æ“Šå…Œç</span>
                            </a>
                            <button onclick="location.reload()" class="text-stone-400 text-xs font-bold hover:text-stone-600 py-1">é‡æ–°å°‹å¯¶ â†»</button>
                        </div>
                    </div>
                `;
            }
        }

        function createSnow() {
            const field = document.getElementById('snow-field');
            for (let i = 0; i < 35; i++) { // é›ªèŠ±æ•¸é‡å¢åŠ 
                const s = document.createElement('div');
                s.className = 'snowflake';
                s.style.left = Math.random() * 100 + '%';
                s.style.width = s.style.height = (Math.random() * 4 + 4) + 'px'; // é›ªèŠ±ç¨å¤§ä¸€é»
                s.style.opacity = Math.random() * 0.6 + 0.3; // ä¸é€æ˜åº¦å¢åŠ 
                s.style.animationDuration = (Math.random() * 4 + 3) + 's';
                s.style.animationDelay = Math.random() * 5 + 's';
                field.appendChild(s);
            }
        }

        window.onload = () => { render(); createSnow(); };
    </script>
</body>
</html>
